{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\n\nexport async function getImages(userQuery, pageNumber) {\n\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '?key=43036012-df3a1e6422cb462a655402953';\n  const url = BASE_URL + API_KEY;\n\n  const params = {\n    q: userQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: pageNumber,\n  };\n  const headers = {};\n\n  const response = await axios.get(url, { params, headers });\n  return response.data;\n  // renderGallery(response.data.hits);\n    // .then(response => {\n    //   if (!response.ok) {\n    //     throw new Error('Failed to fetch images. Please try again later.');\n    //   }\n    //   return response.json();\n    // })\n    // .then(data => {\n    //   loader.style.display = 'none';\n    //   if (data.hits.length === 0) {\n    //     iziToast.warning({\n    //       title: 'Warning',\n    //       message:\n    //         'Sorry, there are no images matching your search query. Please try again!',\n    //       position: 'topRight',\n    //       maxWidth: 400,\n    //     });\n    //   } else {\n    //     renderGallery(data.hits);\n   \n    //   }\n    // })\n    // .catch(error => {\n    //   console.error('Error fetching images:', error);\n    //   loader.style.display = 'none';\n    //   iziToast.error({\n    //     title: 'Error',\n    //     message: 'Failed to fetch images. Please try again later.',\n    //     position: 'topRight',\n    //     maxWidth: 400,\n    //   });\n    // });\n}\n","// У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconst gallery = document.querySelector('.gallery');\n\nfunction cardTemplate (obj) {\nreturn `<li class=\"gallery-item\">\n<div class=\"image-card\">\n<a class=\"gallery-link\" href=\"${obj.largeImageURL}\">\n<img \nloading=\"lazy\" \nclass=\"gallery-image\" \nsrc=\"${obj.webformatURL}\" \nalt=\"${obj.tags}\"/>\n\n<div class=\"data-field\">\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Likes</h4>\n<p class=\"data-value\">${obj.likes}</p>\n</div>\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Views</h4>\n<p class=\"data-value\">${obj.views}</p>\n</div>\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Comments</h4>\n<p class=\"data-value\">${obj.comments}</p>\n</div>\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Downloads</h4>\n<p class=\"data-value\">${obj.downloads}</p>\n</div>\n\n</div>\n</a>\n</div>\n</li>`\n};\n\nfunction galleryTemplate(arr){\n  return arr.map(cardTemplate).join('');\n};\n\n\nexport function renderGallery(images) {\n  const markup = galleryTemplate(images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  \n  lightbox.on('show.simplelightbox', function () {});\n  lightbox.refresh();\n};\n\n","// У файлі main.js напиши всю логіку роботи додатка.\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('input');\nconst btnLoadMore = document.querySelector('#load-more')\nform.addEventListener('submit', onFormSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\nconst loader = document.querySelector('.loader');\n\nlet userQuery = '';\nlet pageNumber ;\nlet maxPage = 0;\nconst perPage = 15;\n\n\nasync function onFormSubmit (event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  pageNumber = 1;\n\n  userQuery = input.value.trim();\n\n  if (!userQuery) {\n    iziToast.show({\n      title: 'Warning',\n      message: 'Please enter a search query',\n      position: 'topRight',\n      maxWidth: 400,\n    });\n    return;\n  };\n  try{\n    loader.style.display = 'block';\n    const data = await getImages(userQuery, pageNumber);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    renderGallery(data.hits);\n\n  } catch (error) {\n\n  };\n  \n  checkBtnStatus();\n  loader.style.display = 'none';\n  input.value = '';\n};\n\nasync function onLoadMoreClick(){\n  loader.style.display = 'block';\n  pageNumber += 1;\n\n  try{\n    const data = await getImages(userQuery, pageNumber);\n    renderGallery(data.hits);\n  }catch (error) {\n\n  };\n\n  checkBtnStatus();\n  loader.style.display = 'none';\n};\n\nfunction checkBtnStatus(){\n  if (pageNumber >= maxPage){\n    hideLoadMore();\n  }else {\n    showLoadMore();\n  }\n};\n\nfunction showLoadMore() {\n  btnLoadMore.style.display = \"block\";\n};\nfunction hideLoadMore() {\n  btnLoadMore.style.display = \"none\";\n};\n"],"names":["getImages","userQuery","pageNumber","url","params","headers","axios","lightbox","SimpleLightbox","gallery","cardTemplate","obj","galleryTemplate","arr","renderGallery","images","markup","form","input","btnLoadMore","onFormSubmit","onLoadMoreClick","loader","maxPage","perPage","event","iziToast","data","checkBtnStatus","hideLoadMore","showLoadMore"],"mappings":"owBAOO,eAAeA,EAAUC,EAAWC,EAAY,CAIrD,MAAMC,EAFW,2BACD,0CAGVC,EAAS,CACb,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,EACQG,EAAU,CAAA,EAGhB,OADiB,MAAMC,EAAM,IAAIH,EAAK,CAAE,OAAAC,EAAQ,QAAAC,CAAO,CAAE,GACzC,IAiClB,CCpDA,IAAIE,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,KAChB,CAAC,EAED,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAcC,EAAK,CAC5B,MAAO;AAAA;AAAA,gCAEyBA,EAAI,aAAa;AAAA;AAAA;AAAA;AAAA,OAI1CA,EAAI,YAAY;AAAA,OAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAMSA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKTA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKTA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOrC,CAEA,SAASC,EAAgBC,EAAI,CAC3B,OAAOA,EAAI,IAAIH,CAAY,EAAE,KAAK,EAAE,CACtC,CAGO,SAASI,EAAcC,EAAQ,CACpC,MAAMC,EAASJ,EAAgBG,CAAM,EACrCN,EAAQ,mBAAmB,YAAaO,CAAM,EAE9CT,EAAS,GAAG,sBAAuB,UAAY,CAAE,CAAA,EACjDA,EAAS,QAAO,CAClB,CCtDA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CQ,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAc,SAAS,cAAc,YAAY,EACvDF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAe,EACrD,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIrB,EAAY,GACZC,EACAqB,EAAU,EACd,MAAMC,EAAU,GAGhB,eAAeJ,EAAcK,EAAO,CAOlC,GANAA,EAAM,eAAc,EACpBhB,EAAQ,UAAY,GACpBP,EAAa,EAEbD,EAAYiB,EAAM,MAAM,OAEpB,CAACjB,EAAW,CACdyB,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,8BACT,SAAU,WACV,SAAU,GAChB,CAAK,EACD,MACJ,CACE,GAAG,CACDJ,EAAO,MAAM,QAAU,QACvB,MAAMK,EAAO,MAAM3B,EAAUC,EAAWC,CAAU,EAClDqB,EAAU,KAAK,KAAKI,EAAK,UAAYH,CAAO,EAC5CV,EAAca,EAAK,IAAI,CAExB,MAAe,CAGlB,CACEC,IACAN,EAAO,MAAM,QAAU,OACvBJ,EAAM,MAAQ,EAChB,CAEA,eAAeG,GAAiB,CAC9BC,EAAO,MAAM,QAAU,QACvBpB,GAAc,EAEd,GAAG,CACD,MAAMyB,EAAO,MAAM3B,EAAUC,EAAWC,CAAU,EAClDY,EAAca,EAAK,IAAI,CACxB,MAAc,CAGjB,CACEC,IACAN,EAAO,MAAM,QAAU,MACzB,CAEA,SAASM,GAAgB,CACnB1B,GAAcqB,EAChBM,IAEAC,GAEJ,CAEA,SAASA,GAAe,CACtBX,EAAY,MAAM,QAAU,OAC9B,CACA,SAASU,GAAe,CACtBV,EAAY,MAAM,QAAU,MAC9B"}